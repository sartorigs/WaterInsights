@model ProjetoModel

<style>
    label {
        color: #FFFFFF;
    }

    input {
        color: #FFFFFF;
    }

    .button-1 {
        background: #066C8B;
        border-radius: 999px;
        box-shadow: #066C8B 0 10px 20px -10px;
        box-sizing: border-box;
        color: rgba(255,255,255, 1);
        cursor: pointer;
        font-family: Inter,Helvetica,"Apple Color Emoji","Segoe UI Emoji",NotoColorEmoji,"Noto Color Emoji","Segoe UI Symbol","Android Emoji",EmojiSymbols,-apple-system,system-ui,"Segoe UI",Roboto,"Helvetica Neue","Noto Sans",sans-serif;
        font-size: 16px;
        font-weight: 700;
        line-height: 24px;
        opacity: 1;
        outline: 0 solid transparent;
        padding: 8px 18px;
        user-select: none;
        -webkit-user-select: none;
        touch-action: manipulation;
        width: fit-content;
        word-break: break-word;
        border: 0;
    }

        .button-1:hover {
            transform: scale(1.02);
        }

    @@import url(https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css);
    @@import url('https://fonts.googleapis.com/css?family=Roboto');

    .uploader body {
        padding: 2rem;
        background: #f8f8f8;
    }

    .uploader h2 {
        font-family: "Roboto", sans-serif;
        font-size: 26px;
        line-height: 1;
        color: #2171B4;
        margin-bottom: 0;
    }

    .uploader p {
        font-family: "Roboto", sans-serif;
        font-size: 18px;
        color: #2171B4;
    }

    .uploader {
        display: block;
        clear: both;
        margin: 0 auto;
        width: 100%;
        max-width: 600px;
    }

        .uploader label {
            float: left;
            clear: both;
            width: 100%;
            padding: 2rem 1.5rem;
            text-align: center;
            background: #fff;
            border-radius: 7px;
            border: 3px solid #eee;
            transition: all 0.2s ease;
            user-select: none;
        }

            .uploader label:hover {
                border-color: #2171B4;
            }

            .uploader label.hover {
                border: 3px solid #2171B4;
                box-shadow: inset 0 0 0 6px #eee;
            }

                .uploader label.hover #start i.fa {
                    transform: scale(0.8);
                    opacity: 0.3;
                }

        .uploader #start {
            float: left;
            clear: both;
            width: 100%;
        }

            .uploader #start.hidden {
                display: none;
            }

            .uploader #start i.fa {
                font-size: 50px;
                margin-bottom: 1rem;
                transition: all 0.2s ease-in-out;
            }

        .uploader #response {
            float: left;
            clear: both;
            width: 100%;
        }

            .uploader #response.hidden {
                display: none;
            }

            .uploader #response #messages {
                margin-bottom: 0.5rem;
            }

        .uploader #file-image {
            display: inline;
            margin: 0 auto 0.5rem auto;
            width: auto;
            height: auto;
            max-width: 180px;
        }

            .uploader #file-image.hidden {
                display: none;
            }

        .uploader #notimage {
            display: block;
            float: left;
            clear: both;
            width: 100%;
        }

            .uploader #notimage.hidden {
                display: none;
            }

        .uploader progress, .uploader .progress {
            display: inline;
            clear: both;
            margin: 0 auto;
            width: 100%;
            max-width: 180px;
            height: 8px;
            border: 0;
            border-radius: 4px;
            background-color: #eee;
            overflow: hidden;
        }

            .uploader .progress[value]::-webkit-progress-bar {
                border-radius: 4px;
                background-color: #eee;
            }

            .uploader .progress[value]::-webkit-progress-value {
                background: linear-gradient(to right, #2171B4 0%, #174165 50%);
                border-radius: 4px;
            }

            .uploader .progress[value]::-moz-progress-bar {
                background: linear-gradient(to right, #2171B4 0%, #174165 50%);
                border-radius: 4px;
            }

        .uploader input[type="file"] {
            display: none;
        }

        .uploader div {
            margin: 0 0 0.5rem 0;
            color: grey;
        }

        .btn {
        background: #066C8B;
        border-radius: 999px;
        box-shadow: #066C8B 0 10px 20px -10px;
        box-sizing: border-box;
        color: rgba(255,255,255, 1);
        cursor: pointer;
        font-family: Inter,Helvetica,"Apple Color Emoji","Segoe UI Emoji",NotoColorEmoji,"Noto Color Emoji","Segoe UI Symbol","Android Emoji",EmojiSymbols,-apple-system,system-ui,"Segoe UI",Roboto,"Helvetica Neue","Noto Sans",sans-serif;
        font-size: 16px;
        font-weight: 700;
        line-height: 24px;
        opacity: 1;
        outline: 0 solid transparent;
        padding: 8px 18px;
        user-select: none;
        -webkit-user-select: none;
        touch-action: manipulation;
        width: fit-content;
        word-break: break-word;
        border: 0;
    }

        .btn:hover {
            transform: scale(1.02);
        }

</style>

@*https://bashooka.com/coding/css-javascript-file-upload-examples/*@

<body style="background-color: #0D1117">
</body>

<form asp-action="Novo" enctype="multipart/form-data">
    <input type="number" hidden="true" asp-for="@Model.Id" value="0" />
    <div class="row">
        <div class="col-12">
            <label for="inputAddress">Titulo</label>
            <input type="text" class="form-control" asp-for="@Model.Titulo" id="inputAddress" placeholder="Titulo">
        </div>
    </div>
    <div class="row">
        <div class="col-12">
            <label for="inputAddress2">Descrição</label>
            <input type="text" asp-for="@Model.Descricao" class="form-control" id="inputAddress2" placeholder="Descrição">
        </div>
    </div>
    <div class="row">
        <div class="col-12">
            <label for="inputCity">Items</label>
            <input type="text" class="form-control" asp-for="@Model.Itens" id="inputCity">
        </div>
    </div>

    <div class="row">
        <div class="col-12">

            <div id="file-upload-form" class="uploader">
                <input type="file" asp-for="@Model.Imagem" id="file-upload" />

                <label for="file-upload" id="file-drag">
                    <img id="file-image" src="#" alt="Preview" class="hidden">
                    <div id="start">
                        <i class="fa fa-download" aria-hidden="true"></i>
                        <div>Select a file or drag here</div>
                        <div id="notimage" class="hidden">Please select an image</div>
                        <span id="file-upload-btn" class="btn btn-primary">Select a file</span>
                    </div>
                    <div id="response" class="hidden">
                        <div id="messages"></div>
                        <progress class="progress" id="file-progress" value="0">
                            <span>0</span>%
                        </progress>
                    </div>
                </label>
            </div>
        </div>
    </div>
    <div class="col-12">
        <button style=" width: 100%; margin-top: 5%; position: relative; float: right;" type="submit" class="button-1">Salvar</button>
    </div>
</form>

<script>
    // File Upload
    //
    function ekUpload() {
        function Init() {

            console.log("Upload Initialised");

            var fileSelect = document.getElementById('file-upload'),
                fileDrag = document.getElementById('file-drag'),
                submitButton = document.getElementById('submit-button');

            fileSelect.addEventListener('change', fileSelectHandler, false);

            // Is XHR2 available?
            var xhr = new XMLHttpRequest();
            if (xhr.upload) {
                // File Drop
                fileDrag.addEventListener('dragover', fileDragHover, false);
                fileDrag.addEventListener('dragleave', fileDragHover, false);
                fileDrag.addEventListener('drop', fileSelectHandler, false);
            }
        }

        function fileDragHover(e) {
            var fileDrag = document.getElementById('file-drag');

            e.stopPropagation();
            e.preventDefault();

            fileDrag.className = (e.type === 'dragover' ? 'hover' : 'modal-body file-upload');
        }

        function fileSelectHandler(e) {
            var files = e.target.files || e.dataTransfer.files;

            fileDragHover(e);

            for (var i = 0, f; f = files[i]; i++) {
                parseFile(f);
                uploadFile(f);
            }
        }

        function output(msg) {
            var m = document.getElementById('messages');
            m.innerHTML = msg;
        }

        function parseFile(file) {

            console.log(file.name);
            output(
                '<strong>' + encodeURI(file.name) + '</strong>'
            );

            var imageName = file.name;

            var isGood = (/\.(?=gif|jpg|png|jpeg)/gi).test(imageName);
            if (isGood) {
                document.getElementById('start').classList.add("hidden");
                document.getElementById('response').classList.remove("hidden");
                document.getElementById('notimage').classList.add("hidden");
                document.getElementById('file-image').classList.remove("hidden");
                document.getElementById('file-image').src = URL.createObjectURL(file);
            }
            else {
                document.getElementById('file-image').classList.add("hidden");
                document.getElementById('notimage').classList.remove("hidden");
                document.getElementById('start').classList.remove("hidden");
                document.getElementById('response').classList.add("hidden");
                document.getElementById("file-upload-form").reset();
            }
        }

        function uploadFile(file) {

            var xhr = new XMLHttpRequest(),
                fileInput = document.getElementById('class-roster-file'),
                pBar = document.getElementById('file-progress'),
                fileSizeLimit = 1024;
            if (xhr.upload) {
                if (file.size <= fileSizeLimit * 1024 * 1024) {
                    pBar.style.display = 'inline';
                    xhr.upload.addEventListener('loadstart', setProgressMaxValue, false);
                    xhr.upload.addEventListener('progress', updateFileProgress, false);

                    xhr.open('POST', document.getElementById('file-upload-form').action, true);
                    xhr.setRequestHeader('X-File-Name', file.name);
                    xhr.setRequestHeader('X-File-Size', file.size);
                    xhr.setRequestHeader('Content-Type', 'multipart/form-data');
                    xhr.send(file);
                }
            }
        }

        if (window.File && window.FileList && window.FileReader) {
            Init();
        } else {
            document.getElementById('file-drag').style.display = 'none';
        }
    }
    ekUpload();
</script>
